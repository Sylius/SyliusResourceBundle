<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
    <services>
        <defaults public="true" />

        <service id="Sylius\Bundle\ResourceBundle\EventListener\ReadListener" public="false">
            <argument type="service" id="sylius.resource_registry" />
            <argument type="service" id="sylius.resource_controller.request_configuration_factory" />
            <argument type="service" id="sylius.metadata_factory.resource" />
            <argument type="service" id="Sylius\Component\Resource\State\ProviderInterface" />
            <tag name="kernel.event_listener" event="kernel.request" method="onKernelRequest" priority="4" />
        </service>

        <service id="Sylius\Bundle\ResourceBundle\EventListener\FactoryListener" public="false">
            <argument type="service" id="sylius.resource_registry" />
            <argument type="service" id="sylius.resource_controller.request_configuration_factory" />
            <argument type="service" id="sylius.metadata_factory.resource" />
            <argument type="service" id="Sylius\Component\Resource\Factory\FactoryLocator" />
            <argument type="service" id="sylius.resource_controller.new_resource_factory" />
            <tag name="kernel.event_listener" event="kernel.request" method="onKernelRequest" priority="2" />
        </service>

        <service id="Sylius\Bundle\ResourceBundle\EventListener\FormListener" public="false">
            <argument type="service" id="sylius.resource_registry" />
            <argument type="service" id="sylius.resource_controller.request_configuration_factory" />
            <argument type="service" id="sylius.metadata_factory.resource" />
            <argument type="service" id="sylius.form_factory" />
            <tag name="kernel.event_listener" event="kernel.view" method="onKernelView" priority="128" />
        </service>

        <service id="Sylius\Bundle\ResourceBundle\EventListener\ValidateListener" public="false">
            <argument type="service" id="sylius.resource_registry" />
            <argument type="service" id="sylius.metadata_factory.resource" />
            <tag name="kernel.event_listener" event="kernel.view" method="onKernelView" priority="64" />
        </service>

        <service id="Sylius\Bundle\ResourceBundle\EventListener\PreEventListener" public="false">
            <argument type="service" id="sylius.resource_registry" />
            <argument type="service" id="sylius.resource_controller.request_configuration_factory" />
            <argument type="service" id="sylius.metadata_factory.resource" />
            <argument type="service" id="sylius.resource_controller.event_dispatcher" />
            <argument type="service" id="sylius.resource_controller.redirect_handler" />
            <tag name="kernel.event_listener" event="kernel.view" method="onKernelView" priority="42" />
        </service>

        <service id="Sylius\Bundle\ResourceBundle\EventListener\WriteListener" public="false">
            <argument type="service" id="sylius.resource_registry" />
            <argument type="service" id="sylius.resource_controller.request_configuration_factory" />
            <argument type="service" id="sylius.metadata_factory.resource" />
            <argument type="service" id="Sylius\Component\Resource\State\ProcessorInterface" />
            <tag name="kernel.event_listener" event="kernel.view" method="onKernelView" priority="32" />
        </service>

        <service id="Sylius\Bundle\ResourceBundle\EventListener\PostEventListener" public="false">
            <argument type="service" id="sylius.resource_registry" />
            <argument type="service" id="sylius.resource_controller.request_configuration_factory" />
            <argument type="service" id="sylius.metadata_factory.resource" />
            <argument type="service" id="sylius.resource_controller.event_dispatcher" />
            <argument type="service" id="sylius.resource_controller.flash_helper" />
            <tag name="kernel.event_listener" event="kernel.view" method="onKernelView" priority="24" />
        </service>

        <service id="Sylius\Bundle\ResourceBundle\EventListener\RespondListener" public="false">
            <argument type="service" id="sylius.resource_registry" />
            <argument type="service" id="sylius.resource_controller.request_configuration_factory" />
            <argument type="service" id="sylius.metadata_factory.resource" />
            <argument type="service" id="Sylius\Component\Resource\State\ResponderInterface" />
            <tag name="kernel.event_listener" event="kernel.view" method="onKernelView" priority="8" />
        </service>
    </services>
</container>
